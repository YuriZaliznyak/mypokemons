"use strict";angular.module("pokemonsApp",["ngResource","ngRoute"]).config(["$routeProvider",function(a){a.when("/pokemons",{templateUrl:"views/choosepockemon.html",controller:"twelvePokemonsController"}).when("/pokemons/:id",{templateUrl:"views/onepokemon.html",controller:"onePokemonController"}).otherwise({redirectTo:"/pokemons"})}]),angular.module("pokemonsApp").controller("twelvePokemonsController",["$scope","load12PokemonsFactory","loadOnePokemonFactory",function(a,b,c){function d(){a.possibleColorTypes={Normal:"hsl(0, 0%, 60%)",Fighting:"hsl(24, 100%, 50%)",Flying:"hsl(210, 100%, 50%)",Poison:"hsl(280, 70%, 70%)",Ground:"hsl(0, 50%, 30%)",Rock:"hsl(30, 100%, 30%)",Bug:"hsl(120, 100%, 30%)",Ghost:"hsl(300, 50%, 40%)",Steel:"hsl(240, 5%, 50%)",Fire:"hsl(0, 100%, 50%)",Water:"hsl(195, 100%, 30%)",Grass:"hsl(90, 100%, 40%)",Electric:"hsl(60, 90%, 50%)",Psychic:"hsl(330, 100%, 50%)",Ice:"hsl(240, 100%, 80%)",Dragon:"hsl(0, 100%, 30%)",Dark:"hsl(240, 15%, 20%)",Fairy:"hsl(300, 100%, 80%)"}}function e(a,b){for(var c=0;c<a.length;c++)if(b.indexOf(a[c])>-1)return!0;return!1}a.chunksize=12,a.totalNumberOfPokemons=718,a.firstCall=!0,a.showPreview=!1,a.currPreviewShift=0,a.twelvePockemons=[],a.allTypesInPage=[],a.showTypesFilter=!1,a.simplyShowAll12Pokemons=!0,a.labelColor="hsl(0, 100%, 50%)",a.getNextPokemons=function(){if(a.showTypesFilter=!1,a.simplyShowAll12Pokemons=!0,a.firstCall?(a.firstCall=!1,a.iOffset=0,d()):a.iOffset+=a.chunksize,a.iOffset>a.totalNumberOfPokemons)return void window.alert("Total number of pokemons exceeded!");a.showPreview=!1;for(var c=0;c<a.chunksize;c++){var e={};e.name="Loading",e.imageString="images/loading.gif",e.types=["Loading ..."],a.twelvePockemons[c]=e}b.get12Pokemons().get({offset:a.iOffset}).$promise.then(function(b){var d=b.objects;console.log("Here--->",d);var f=[];for(var g in d){e={},e.name=d[g].name;var h=[];for(c=0;c<d[g].types.length;c++)h.push(d[g].types[c].name);for(c=0;c<h.length;c++)h[c]=h[c].charAt(0).toUpperCase()+h[c].substring(1);e.types=h;for(var i=0;i<h.length;i++)-1===f.indexOf(h[i])&&f.push(h[i]);e.iNumber=d[g].pkdx_id;var j=e.iNumber.toString();e.imageString="http://pokeapi.co/media/img/"+j+".png",a.twelvePockemons[parseInt(g)]=e}f=f.sort(),a.allTypesInPage=f,a.type2Show=f,a.showTypesFilter=!0,a.simplyShowAll12Pokemons=!1,console.log("All types in page:: ",f,a.type2Show)},function(b){a.message="While downloading chunk of pockemons there an error occured:"+b.status+" "+b.statusText})},a.showOnePokemonDetails=function(b){var d=document.getElementById("alignPoint").getBoundingClientRect(),e=document.getElementById(b.toString()).getBoundingClientRect(),f=e.top-d.top;a.currPreviewShift=f,a.showPreview=!0,a.pokemonImage="images/loading.gif",a.strPokemonNumber="",a.pokemonName="Loading...",a.pokemonType="",a.pokemonAttack="",a.pokemonDefense="",a.pokemonHP="",a.pokemonSPAttack="",a.pokemonSPDefense="",a.pokemonSpeed="",a.pokemonWeight="",a.pokemonTotalMoves="",b>100&&(a.strPokemonNumber=b.toString()),100>b&&b>=10&&(a.strPokemonNumber="0"+b.toString()),10>b&&(a.strPokemonNumber="00"+b.toString()),c.getOnePokemon().get({id:b}).$promise.then(function(c){var d=c;console.log(d),a.pokemonName=d.name;for(var e=[],f=0;f<d.types.length;f++)e.push(d.types[f].name);for(f=0;f<e.length;f++)e[f]=e[f].charAt(0).toUpperCase()+e[f].substring(1);a.pokemonType=e,a.pokemonAttack=d.attack,a.pokemonDefense=d.defense,a.pokemonHP=d.hp,a.pokemonSPAttack=d.sp_atk,a.pokemonSPDefense=d.sp_def,a.pokemonSpeed=d.speed,a.pokemonWeight=d.weight,a.pokemonTotalMoves=d.moves.length,a.pokemonImage="http://pokeapi.co/media/img/"+b.toString()+".png"},function(b){a.message="While downloading single pockemon details there an error occured: "+b.status+" "+b.statusText})},a.selectType2Show=function(b){a.type2Show=b},a.showThis=function(b){return a.simplyShowAll12Pokemons?!0:e(b,a.type2Show)},a.getNextPokemons()}]),angular.module("pokemonsApp").constant("PokemonsURI","http://pokeapi.co/api/v1/pokemon/").factory("loadOnePokemonFactory",["$resource","PokemonsURI",function(a,b){return{getOnePokemon:function(){var c=b+":id";return a(c)}}}]).factory("load12PokemonsFactory",["$resource","PokemonsURI",function(a,b){return{get12Pokemons:function(){var c=b+"?limit=12&offset=:offset";return a(c)}}}]);